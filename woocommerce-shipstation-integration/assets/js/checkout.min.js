(()=>{var e=wc_shipstation_checkout_params.field_ids||{};let a=e.is_gift,t=e.gift_message,n=document.getElementById(a),o=document.getElementById(t);if(n&&o){n.addEventListener("change",function(){i(a,this.checked?"1":"0")}),o.addEventListener("change",function(){i(t,this.value)});let e;function i(e,a){var t=new FormData;t.append("action","shipstation_save_field_value"),t.append("field_id",e),t.append("value",a),t.append("security",wc_checkout_params.update_order_review_nonce),fetch(wc_checkout_params.ajax_url,{method:"POST",credentials:"same-origin",body:t}).catch(e=>{console.error("Error saving field value to session:",e)})}o.addEventListener("input",function(){clearTimeout(e),e=setTimeout(()=>{i(t,this.value)},500)}),document.addEventListener("DOMContentLoaded",function(){var e=new FormData;e.append("action","shipstation_load_field_values"),e.append("security",wc_checkout_params.update_order_review_nonce),fetch(wc_checkout_params.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then(e=>e.json()).then(e=>{e.success&&(e.data.hasOwnProperty(a)&&(n.checked="1"===e.data[a]),e.data.hasOwnProperty(t))&&(o.value=e.data[t])}).catch(e=>{console.error("Error loading field values from session:",e)})})}})();
